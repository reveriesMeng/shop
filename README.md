# shop
仿淘宝京东等电商网站搭建的项目</br>
预览：https://reveriesmeng.github.io/shop/
</br>
## 布局分析
一般的电商网站大体都分为导航栏部分、搜索部分、轮播图部分、商品展示部分，根据分类逐步写对应的代码。</br>
</br>
## 模块化
电商网站有很多复用的部分，比如下拉菜单，很多地方都用到了下拉菜单，头部导航栏部分的详情用下拉菜单表示，分类导航栏的分类详情也用下拉菜单表示，如果一个个的写下拉菜单的代码，那么代码量肯定十分的大，且重复出现大量的冗余的相同的代码，增加了维护的难度。种种原因，封装一个模块是十分有必要的，不仅能降低代码的耦合性，维护起来和使用起来也十分边界，甚至可以延用到其他项目。</br>
例如下拉菜单的模块dropdown.js，通过jQuery自定义插件的形式，将模块的方法暴露出去，如下：
``` js
    $.fn.extend({
        dropdown: function(option) {
            return this.each(function() {   
                var $this=$(this),
                dropdown=$this.data('dropdown'),
                options = $.extend({}, Dropdown.DEFAULTS, $(this).data(), typeof option==='object'&&option);
                if(!dropdown){
                    $this.data('dropdown',dropdown=new Dropdown($this,options));
                }  
                if(typeof dropdown[option]==='function'){
                    dropdown[option]();
                }
            });
        }
    });
 ```

外部只要引入dropdown.js模块既可以直接使用模块里的方法，如下：
``` js
        $('.dropdown').dropdown({
        event: 'hover',
        delay: 1000,
        css3: true,
        js: true,
        animation: 'fade'
    });
```
例如，通过event的传值来调用hover触发事件还是click触发事件，delay表示动画时长，css3和js表示用css3还是js的动画，animation表示动画的表现形式。传不同的值即可表现不同的形式，照顾到各式的下拉菜单。</br>
由于使用者传值的原因，多多少少会出现传入错误的参数，因此模块里对传进来的值要进行容错处理，在模块里要定义一个默认值，但传入错误值时使用默认值代替。</br>
</br>
## 加载处理
这个项目的图片和数据等都是本地的，因此加载很快，但如果通过http请求或异步请求得到的数据，有可能因为网络的原因导致获取数据过慢，此时，要渲染到DOM里的图片和数据不存在，界面会十分难看，此时应预先使用默认加载图片代替，一定程度上减小前面那种情况的弊端。</br>
</br>
## 数据保存
如上加载处理，如果网速慢，显示默认加载图片代替，但如果再次请求相同的数据，还是用默认加载图片的方式代替的话，不仅增加了对服务端的请求，也增加了前端的二次重复加载，用户体验十分差，对于性能也十分不佳。因此如果我们请求了一次数据，就将数据保存到相对于html标签的data属性中，下次再次请求相同的数据时，直接从data中取出来即可（不同的数据的话就只能再次请求了）。</br>
data不仅能够保存请求得到的数据，还能够保存一些状态，比如下拉菜单的状态是显示状态还是隐藏状态，通过判断状态可以做出相应的处理。</br>
</br>
## 性能考虑
1.构造函数的实列为单例，实例化多个对象会让费堆空间。</br>
2.减少对Dom元素的操作，容易引起重绘和回流。</br>
3.css将通用的代码写在一起，供复用使用。</br>
4.减少http请求数，请求后保存数据，防止请求相同的数据继续请求。</br>
5.将模块的js文件置于html底部，待DOM加载完成后在载入js文件。</br>






    
